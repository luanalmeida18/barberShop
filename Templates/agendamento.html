{% extends 'base.html' %}
{% load crispy_forms_tags %}

{% block 'titulo' %}Agende seu horário{% endblock %}

<style>

  html, body {
    margin: 0;
    padding: 0;
    font-family: Arial, Helvetica Neue, Helvetica, sans-serif;
    font-size: 14px;
  }

  #calendar {
    max-width: 1100px;
    margin: 40px auto;
  }

</style>

{% block extra_head %}

<script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.9/index.global.min.js'></script>


<script src='/docs/dist/demo-to-codepen.js'></script>


<script>

  document.addEventListener('DOMContentLoaded', function() {
    var calendarEl = document.getElementById('calendar');
    
    var calendar = new FullCalendar.Calendar(calendarEl, {
      initialView: 'dayGridMonth',
      selectable: true,
      selectHelper: true,

      eventClick: function(info) {
        $('#visualizar #title').text(info.event.title);
        $('#visualizar').modal('show');

      },
      
      select : function(start, end) {

        $('#cadastrar').modal('show');
        
      },
      
      locale: 'BR',
      headerToolbar: {
        end: 'prevYear,prev,next,nextYear'
      },
      footerToolbar: {
        center: '',
        end: 'prev,next'
      },
      events: [
        {
          title: "teste",
          start: "2023-10-03T10:00:00",
          end: "2023-10-03T11:00:00"
        },
      ]
    });

    calendar.render();
  });

  //Mascara de entrada de contato modal cadastro
  function FormatTel(evento, objeto){
    var keypress = (window.event)?event.keyCode:evento.which;
    campo = eval (objeto);
    if (campo.value == '(00) 00000-0000'){
      campo.value = ""
    }

    caracteres = '0123456789';
    separacao1 = '(';
    separacao2 = ')';
    separacao3 = ' ';
    separacao4 = '-';
    conjunto1 = 0;
    conjunto2 = 3;
    conjunto3 = 10;

    if ((caracteres.search(String.fromCharCode (keypress)) !=-1) && campo.value.length < (15)){
      if (campo.value.length == conjunto1)
      campo.value = campo.value + separacao1;
      else if (campo.value.length == conjunto2)
      campo.value = campo.value + separacao2 + separacao3;
      else if (campo.value.length == conjunto3)
      campo.value = campo.value + separacao4;
  }else {
      event.returnValue = false;
    }
  }


</script>
{% endblock %}

{% block 'btn' %}
<!-- <li>
<a href="{% url 'cadastrar' %}" type="button" class="btn btn-primary" style="margin-right: 8px;">Cadastrar</a>
</li> -->

<li>
<a href="{% url 'barberHome' %}" type="button" class="btn btn-danger">Sair</a>
</li>
{% endblock %}

{% block 'conteudo' %}
<div class="modal fade" id="cadastrar" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
<div class="modal-dialog modal-lg" role="document">
  <div class="modal-content rounded">
    <div class="modal-header" style="margin-top: 15px;">
      <button type="button" class="close bg-transparent border-0 text-secondary" style="font-size: 30px;" data-dismiss="modal">&times;</button>
  </div>

  <div class="container m-5 w-50">
    <div class="modal-body">
      <form class="w-50" method="post">

        <div style="margin-right: 10px; margin-top: 4px">
          <label for="name">Nome</label><br>
          <input class="rounded" type="text" placeholder="Digite aqui..">
        </div>

        <div style="margin-right: 10px; margin-top: 4px">
          <label for="name">Email</label><br>
          <input class="rounded" type="text" placeholder="Digite aqui..">
        </div>

        <div style="margin-right: 10px; margin-top: 4px">
          <label for="name">Contato</label><br>
          <input class="rounded" type="text" placeholder="Digite aqui.." onkeypress="FormatTel(event, this)">
        </div>
<br>
        <div class="dropdown">
          <label for="hora-disponivel">Horários Disponíveis</label><br>

          <select name="horarios" id="" class="btn border-dark">
            <option value="{{ horarios.horarios }}">{{ horarios.horarios }}</option>
          </select>
                      <br><br>
          <input type="button" value="Cadastrar" class="btn btn-success">

          <div class="dropdown-menu" aria-labelledby="dropdownMenuLink"></div>
        </div>
      </form>
    </div>
  </div>
</div>
</div>
</div>

<div class="modal fade" id="visualizar" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header" style="margin-top: 15px;">
        <h2 class="modal-title m-auto" id="exampleModalLabel">Mostrar Evento</h2>
        <button type="button" class="close bg-transparent border-0 text-secondary" style="font-size: 30px;" data-dismiss="modal">&times;</button>
      </button>
    </div>

    <div class="container m-5">
      <div class="modal-body">
        <div>
          <dl class="row">
            <dt class="col-sm-3">Cliente</dt>
            <dd class="col-sm-9" id="title"></dd>
          </dl>
        </div>
      </div>
    </div>
  </div>
</div>
</div>
<div id='calendar'></div>
<!-- Cloudflare Pages Analytics --><script defer src='https://static.cloudflareinsights.com/beacon.min.js' data-cf-beacon='{"token": "dc4641f860664c6e824b093274f50291"}'></script><!-- Cloudflare Pages Analytics -->

{% endblock %}


  